openapi: 3.0.1
info:
  version: "1.0.0"
  title: Open Banking Gateway Admin API (might be disabled)
  description: >-
    This API provides capability to manage bank configuration and protocol setup. It is enableable
    using 'admin.api.enabled' property.
externalDocs:
  url: "https://adorsys.github.com/open-banking-gateway"


paths:
  /admin/banks:
    get:
      tags:
        - admin-api-controller
      operationId: getBanksData
      parameters:
        - name: page
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/Pageable'
      responses:
        "200":
          description: default response
          content:
            '*/*':
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/BankData'
  /admin/banks/{id}:
    get:
      tags:
        - admin-api-controller
      operationId: getBankDataById
      parameters:
        - name: bankId
          in: query
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: default response
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/BankData'
    put:
      tags:
        - admin-api-controller
      operationId: createNewBankDataEntry
      parameters:
        - name: bankId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BankData'
      responses:
        "200":
          description: default response
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/BankData'
    delete:
      tags:
        - admin-api-controller
      operationId: deleteBankDataEntry
      parameters:
        - name: bankId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: default response
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/BankData'
    patch:
      tags:
        - admin-api-controller
      operationId: updateBankDataEntry
      parameters:
        - name: bankId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BankData'
      responses:
        "200":
          description: default response
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/BankData'
components:
  schemas:
    Pageable:
      type: object
      properties:
        pageNumber:
          type: integer
          format: int32
        pageSize:
          type: integer
          format: int32
        unpaged:
          type: boolean
        paged:
          type: boolean
        sort:
          $ref: '#/components/schemas/Sort'
        offset:
          type: integer
          format: int64
    Sort:
      type: object
      properties:
        sorted:
          type: boolean
        unsorted:
          type: boolean
        empty:
          type: boolean
    Bank:
      type: object
      properties:
        id:
          type: integer
          format: int64
        uuid:
          type: string
        name:
          type: string
        bic:
          type: string
        bankCode:
          type: string
    BankAction:
      type: object
      properties:
        id:
          type: integer
          format: int64
        bankProfile:
          $ref: '#/components/schemas/BankProfile'
        protocolAction:
          type: string
          enum:
            - list-accounts
            - list-transactions
            - authorization
            - get-authorization-state
            - update-authorization
            - deny-authorization
            - from-aspsp
            - single-payment
            - get-payment-status
            - get-payment-information
        protocolBeanName:
          type: string
        consentSupported:
          type: boolean
        subProtocols:
          type: array
          items:
            $ref: '#/components/schemas/BankSubAction'
    BankData:
      type: object
      properties:
        bank:
          $ref: '#/components/schemas/Bank'
        profile:
          $ref: '#/components/schemas/BankProfile'
        availableActions:
          type: array
          items:
            $ref: '#/components/schemas/BankAction'
    BankProfile:
      type: object
      properties:
        id:
          type: integer
          format: int64
        bank:
          $ref: '#/components/schemas/Bank'
        url:
          type: string
        adapterId:
          type: string
        idpUrl:
          type: string
        scaApproaches:
          type: array
          items:
            type: string
            enum:
              - REDIRECT
              - EMBEDDED
        preferredApproach:
          type: string
          enum:
            - REDIRECT
            - EMBEDDED
        tryToUsePreferredApproach:
          type: boolean
        uniquePaymentPurpose:
          type: boolean
        actions:
          type: object
          additionalProperties:
            $ref: '#/components/schemas/BankAction'
        bankCode:
          type: string
        bic:
          type: string
        name:
          type: string
    BankSubAction:
      type: object
      properties:
        id:
          type: integer
          format: int64
        action:
          $ref: '#/components/schemas/BankAction'
        protocolAction:
          type: string
          enum:
            - list-accounts
            - list-transactions
            - authorization
            - get-authorization-state
            - update-authorization
            - deny-authorization
            - from-aspsp
            - single-payment
            - get-payment-status
            - get-payment-information
        subProtocolBeanName:
          type: string